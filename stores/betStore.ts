import { defineStore } from 'pinia';

export const useBetStore = defineStore('bets', {
  state: () => ({ 
    nextGames: null as any | null,
    pastGames: null as any | null
  }),
  actions: {
    convertDateToString() {
      const today = new Date();

      const formatDate = (date: Date): string => {
          const year = date.getFullYear();
          const month = (date.getMonth() + 1).toString().padStart(2, '0');
          const day = date.getDate().toString().padStart(2, '0');
          return `${year}-${month}-${day}`;
      };

      const nextWeek = new Date(today);
      nextWeek.setDate(today.getDate() + 7);

      const todayFormatted = formatDate(today);
      const nextWeekFormatted = formatDate(nextWeek);
      console.log(todayFormatted, nextWeekFormatted)
      return {
          today: todayFormatted,
          nextWeek: nextWeekFormatted
      };
    },

    async fetchNextGames(leagueId: number, count: number) {
      const dates = this.convertDateToString()
      // const url = `https://api-football-v1.p.rapidapi.com/v3/fixtures?league=${leagueId}&season=2024&next=${count}`;
      const url = `https://api-football-v1.p.rapidapi.com/v3/fixtures?league=${leagueId}&season=2024&from=${dates.today}&to=${dates.nextWeek}`
      const headers = {
        'x-rapidapi-key': '9e5e2785cbmshd7e0f7a68c44835p1fd16fjsndac8dbc9c39d',
        'x-rapidapi-host': 'api-football-v1.p.rapidapi.com',
      };
      this.nextGames = json
      // try {
      //   const response = await fetch(url, {
      //     method: 'GET',
      //     headers: headers,
      //   });
      //   const data = await response.json();
      //   if (data && data.response) {
      //     this.nextGames = data.response;
      //     console.log(this.nextGames)
      //   } else {
      //     this.nextGames = null;
      //   }
      //   // this.nextGamesData = json3
      // } catch (error) {
      //   console.error('Error fetching fixtures data:', error);
      //   this.nextGames = null;
      // }
    },
  }
})


const json = [ { "fixture": { "id": 1208099, "referee": null, "timezone": "UTC", "date": "2024-10-19T11:30:00+00:00", "timestamp": 1729337400, "periods": { "first": null, "second": null }, "venue": { "id": 593, "name": "Tottenham Hotspur Stadium", "city": "London" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 47, "name": "Tottenham", "logo": "https://media.api-sports.io/football/teams/47.png", "winner": null }, "away": { "id": 48, "name": "West Ham", "logo": "https://media.api-sports.io/football/teams/48.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208095, "referee": null, "timezone": "UTC", "date": "2024-10-19T14:00:00+00:00", "timestamp": 1729346400, "periods": { "first": null, "second": null }, "venue": { "id": 556, "name": "Old Trafford", "city": "Manchester" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 33, "name": "Manchester United", "logo": "https://media.api-sports.io/football/teams/33.png", "winner": null }, "away": { "id": 55, "name": "Brentford", "logo": "https://media.api-sports.io/football/teams/55.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208096, "referee": null, "timezone": "UTC", "date": "2024-10-19T14:00:00+00:00", "timestamp": 1729346400, "periods": { "first": null, "second": null }, "venue": { "id": 562, "name": "St. James' Park", "city": "Newcastle upon Tyne" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 34, "name": "Newcastle", "logo": "https://media.api-sports.io/football/teams/34.png", "winner": null }, "away": { "id": 51, "name": "Brighton", "logo": "https://media.api-sports.io/football/teams/51.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208092, "referee": null, "timezone": "UTC", "date": "2024-10-19T14:00:00+00:00", "timestamp": 1729346400, "periods": { "first": null, "second": null }, "venue": { "id": 535, "name": "Craven Cottage", "city": "London" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 36, "name": "Fulham", "logo": "https://media.api-sports.io/football/teams/36.png", "winner": null }, "away": { "id": 66, "name": "Aston Villa", "logo": "https://media.api-sports.io/football/teams/66.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208098, "referee": null, "timezone": "UTC", "date": "2024-10-19T14:00:00+00:00", "timestamp": 1729346400, "periods": { "first": null, "second": null }, "venue": { "id": 585, "name": "St. Mary's Stadium", "city": "Southampton, Hampshire" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 41, "name": "Southampton", "logo": "https://media.api-sports.io/football/teams/41.png", "winner": null }, "away": { "id": 46, "name": "Leicester", "logo": "https://media.api-sports.io/football/teams/46.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208093, "referee": null, "timezone": "UTC", "date": "2024-10-19T14:00:00+00:00", "timestamp": 1729346400, "periods": { "first": null, "second": null }, "venue": { "id": 545, "name": "Portman Road", "city": "Ipswich, Suffolk" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 57, "name": "Ipswich", "logo": "https://media.api-sports.io/football/teams/57.png", "winner": null }, "away": { "id": 45, "name": "Everton", "logo": "https://media.api-sports.io/football/teams/45.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208091, "referee": null, "timezone": "UTC", "date": "2024-10-19T16:30:00+00:00", "timestamp": 1729355400, "periods": { "first": null, "second": null }, "venue": { "id": 504, "name": "Vitality Stadium", "city": "Bournemouth, Dorset" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 35, "name": "Bournemouth", "logo": "https://media.api-sports.io/football/teams/35.png", "winner": null }, "away": { "id": 42, "name": "Arsenal", "logo": "https://media.api-sports.io/football/teams/42.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208100, "referee": null, "timezone": "UTC", "date": "2024-10-20T13:00:00+00:00", "timestamp": 1729429200, "periods": { "first": null, "second": null }, "venue": { "id": 600, "name": "Molineux Stadium", "city": "Wolverhampton, West Midlands" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 39, "name": "Wolves", "logo": "https://media.api-sports.io/football/teams/39.png", "winner": null }, "away": { "id": 50, "name": "Manchester City", "logo": "https://media.api-sports.io/football/teams/50.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208094, "referee": null, "timezone": "UTC", "date": "2024-10-20T15:30:00+00:00", "timestamp": 1729438200, "periods": { "first": null, "second": null }, "venue": { "id": 550, "name": "Anfield", "city": "Liverpool" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 40, "name": "Liverpool", "logo": "https://media.api-sports.io/football/teams/40.png", "winner": null }, "away": { "id": 49, "name": "Chelsea", "logo": "https://media.api-sports.io/football/teams/49.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } }, { "fixture": { "id": 1208097, "referee": null, "timezone": "UTC", "date": "2024-10-21T19:00:00+00:00", "timestamp": 1729537200, "periods": { "first": null, "second": null }, "venue": { "id": 566, "name": "The City Ground", "city": "Nottingham, Nottinghamshire" }, "status": { "long": "Not Started", "short": "NS", "elapsed": null, "extra": null } }, "league": { "id": 39, "name": "Premier League", "country": "England", "logo": "https://media.api-sports.io/football/leagues/39.png", "flag": "https://media.api-sports.io/flags/gb-eng.svg", "season": 2024, "round": "Regular Season - 8" }, "teams": { "home": { "id": 65, "name": "Nottingham Forest", "logo": "https://media.api-sports.io/football/teams/65.png", "winner": null }, "away": { "id": 52, "name": "Crystal Palace", "logo": "https://media.api-sports.io/football/teams/52.png", "winner": null } }, "goals": { "home": null, "away": null }, "score": { "halftime": { "home": null, "away": null }, "fulltime": { "home": null, "away": null }, "extratime": { "home": null, "away": null }, "penalty": { "home": null, "away": null } } } ]
